"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[284],{1770:function(c,t,a){a.d(t,{Z:function(){return m}});var e=a(3396),s=a(7139);const l={class:"nearby-item"},n={class:"left"},i=["src"],o={class:"shop-title"},r={class:"tags"},d={class:"promotion"};function u(c,t,a,u,h,p){return(0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",n,[(0,e._)("img",{src:a.item.logo,alt:"",class:"shop-logo"},null,8,i)]),(0,e._)("div",{class:(0,s.C_)({right:!0,line:a.showBorder})},[(0,e._)("div",o,(0,s.zw)(a.item.title),1),(0,e._)("div",r,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.item.tags,((c,t)=>((0,e.wg)(),(0,e.iD)("span",{key:t,class:"tag-item"},(0,s.zw)(c),1)))),128))]),(0,e._)("div",d,(0,s.zw)(a.item.promotion),1)],2)])}var h={name:"ShopInfo",props:{item:{type:Object},showBorder:{type:Boolean,default:!0}}},p=a(89);const C=(0,p.Z)(h,[["render",u],["__scopeId","data-v-0ac5544a"]]);var m=C},5284:function(c,t,a){a.r(t),a.d(t,{default:function(){return oc}});var e=a(3396),s=a(7139),l=a(9242),n="data:image/png;base64,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";const i=c=>((0,e.dD)("data-v-525b94bd"),c=c(),(0,e.Cn)(),c),o={class:"shop"},r={class:"head"},d=i((()=>(0,e._)("span",{class:"iconfont icon-left"},null,-1))),u=i((()=>(0,e._)("span",{class:"iconfont icon-search"},null,-1))),h=i((()=>(0,e._)("input",{type:"text",class:"search-input",placeholder:"请输入商品名称搜索"},null,-1))),p={class:"shop-body"},C={class:"category"},m=["onClick","tab-name"],v={class:"detail"},k={class:"left"},g=["src"],f={class:"right"},y={class:"product-title"},I={class:"product-sale"},w={class:"product-data"},A={class:"data-left"},F={class:"current-price"},E={class:"previous-price"},L={class:"data-right"},O=["onClick"],H=["onClick"],S={class:"foot"},N={class:"left"},R={class:"left-title"},_={class:"left-title"},z={class:"right"},B={class:"cart-info"},V={class:"cart-top"},D={class:"left"},T=i((()=>(0,e._)("span",{class:"text"},"全选",-1))),K={class:"cart-content"},P={class:"cart-item"},J={class:"left"},b=["onClick"],x=["onClick"],U=["src"],q={class:"product-info"},Q={class:"product-title"},W={class:"product-data"},j={class:"current-price"},Y={class:"previous-price"},G={class:"right"},Z=["onClick"],M={class:"product-count"},X=["onClick"];function $(c,t,a,i,$,cc){const tc=(0,e.up)("router-link"),ac=(0,e.up)("ShopInfo");return(0,e.wg)(),(0,e.iD)("div",o,[(0,e._)("div",r,[(0,e.Wm)(tc,{to:{path:"/"}},{default:(0,e.w5)((()=>[d])),_:1}),u,h]),(0,e.Wm)(ac,{class:"shop-info",item:i.item,showBorder:!1},null,8,["item"]),(0,e._)("div",p,[(0,e._)("div",C,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.leftItems,(c=>((0,e.wg)(),(0,e.iD)("div",{onClick:t=>i.handleItemClick(c.name),"tab-name":c.name,key:c.id,class:(0,s.C_)({"category-item":!0,active:c.name===i.currentItemName})},(0,s.zw)(c.text),11,m)))),128))]),(0,e._)("div",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.rightItems,(c=>((0,e.wg)(),(0,e.iD)("div",{key:c.id,class:"detail-item"},[(0,e._)("div",k,[(0,e._)("img",{src:c.img,alt:"",class:"product-img"},null,8,g)]),(0,e._)("div",f,[(0,e._)("div",y,(0,s.zw)(c.title),1),(0,e._)("div",I,"月售"+(0,s.zw)(c.sale)+"件",1),(0,e._)("div",w,[(0,e._)("div",A,[(0,e._)("span",F,(0,s.zw)(c.currentPrice),1),(0,e._)("span",E,"¥"+(0,s.zw)(c.previousePrice),1)]),(0,e._)("div",L,[(0,e.wy)((0,e._)("span",{onClick:t=>i.changeCartCount(c.id,-1),class:"iconfont icon-minus-circle"},null,8,O),[[l.F8,c.cartCount]]),(0,e.wy)((0,e._)("span",{class:"product-count"},(0,s.zw)(c.cartCount),513),[[l.F8,c.cartCount]]),(0,e._)("span",{onClick:t=>i.changeCartCount(c.id,1),class:"iconfont icon-plus-circle-fill"},null,8,H)])])])])))),128))]),(0,e._)("div",S,[(0,e._)("div",N,[(0,e.wy)((0,e._)("span",{class:"dot"},(0,s.zw)(i.total),513),[[l.F8,i.total]]),(0,e._)("img",{onClick:t[0]||(t[0]=c=>i.cartIconClick()),src:n,alt:"",class:"cart-img"}),(0,e.wy)((0,e._)("span",R,"购物车是空的",512),[[l.F8,"[]"===JSON.stringify(i.cartItems)]]),(0,e.wy)((0,e._)("span",_,"总计：",512),[[l.F8,"[]"!==JSON.stringify(i.cartItems)]]),(0,e.wy)((0,e._)("span",{class:"left-price"},"¥"+(0,s.zw)(i.sumPrice),513),[[l.F8,"[]"!==JSON.stringify(i.cartItems)]])]),(0,e.wy)((0,e._)("div",{onClick:t[1]||(t[1]=(...c)=>i.gotoOrder&&i.gotoOrder(...c)),class:"right active"}," 去结算 ",512),[[l.F8,"[]"!==JSON.stringify(i.cartItems)]]),(0,e.wy)((0,e._)("div",z," 去结算 ",512),[[l.F8,"[]"===JSON.stringify(i.cartItems)]])])]),(0,e.wy)((0,e._)("div",{onClick:t[5]||(t[5]=(...c)=>i.cartMaskClick&&i.cartMaskClick(...c)),class:"cart-mask"},[(0,e._)("div",B,[(0,e._)("div",V,[(0,e._)("div",D,[(0,e.wy)((0,e._)("span",{onClick:t[2]||(t[2]=(...c)=>i.changeAllChecked&&i.changeAllChecked(...c)),class:"iconfont icon-Checkbox_unselected2"},null,512),[[l.F8,!i.allChecked]]),(0,e.wy)((0,e._)("span",{onClick:t[3]||(t[3]=(...c)=>i.changeAllChecked&&i.changeAllChecked(...c)),class:"iconfont icon-selected"},null,512),[[l.F8,i.allChecked]]),T]),(0,e._)("div",{onClick:t[4]||(t[4]=(...c)=>i.clearCart&&i.clearCart(...c)),class:"button"},"清空购物车")]),(0,e._)("div",K,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.cartItems,(c=>((0,e.wg)(),(0,e.iD)("div",P,[(0,e._)("div",J,[(0,e.wy)((0,e._)("span",{onClick:t=>i.changeItemChecked(c.id),class:"iconfont icon-Checkbox_unselected2"},null,8,b),[[l.F8,!c.checked]]),(0,e.wy)((0,e._)("span",{onClick:t=>i.changeItemChecked(c.id),class:"iconfont icon-selected"},null,8,x),[[l.F8,c.checked]]),(0,e._)("img",{src:c.img,alt:"",class:"cart-img"},null,8,U),(0,e._)("div",q,[(0,e._)("div",Q,(0,s.zw)(c.title),1),(0,e._)("div",W,[(0,e._)("span",j,(0,s.zw)(c.currentPrice),1),(0,e._)("span",Y,"¥"+(0,s.zw)(c.previousePrice),1)])])]),(0,e._)("div",G,[(0,e._)("span",{onClick:t=>i.changeCartCount(c.id,-1),class:"iconfont icon-minus-circle"},null,8,Z),(0,e._)("span",M,(0,s.zw)(c.cartCount),1),(0,e._)("span",{onClick:t=>i.changeCartCount(c.id,1),class:"iconfont icon-plus-circle-fill"},null,8,X)])])))),256))])])],512),[[l.F8,i.isShowCartList]])])}a(560);var cc=a(65),tc=a(4870),ac=a(2483),ec=a(1374),sc=a(1770),lc={name:"Shop",components:{ShopInfo:sc.Z},setup(){const c=(0,tc.iH)(!1),t=(0,cc.oR)(),a=(0,tc.iH)({}),s=(0,tc.iH)({}),l=(0,tc.iH)({}),n=(0,ac.tv)(),i=(0,ac.yj)(),o=i.params.id;let r=[];const d=async()=>{const c=await(0,ec.U2)(`/shop/${o}`);a.value=c.data},u=async()=>{const c=await(0,ec.U2)(`/shop/${o}/tags`);s.value=c.data},h=async()=>{const c=await(0,ec.U2)(`/shop/${o}/product-list`);l.value=c.data,r=c.data,r.forEach((c=>{c.cartCount=p(o,c.id).cartCount,c.checked=p(o,c.id).checked})),l.value=r},p=(c,a)=>{let e,s;c=Number(c),a=Number(a);const l=t.state.cartData||[];let n={products:[]};l.forEach((t=>{t.id===c&&(n=t)}));let i={};return n.products.forEach((c=>{c.id===a&&(i=c)})),e=i.cartCount||0,s=i.checked||!1,{cartCount:e,checked:s}},C=(c,e)=>{const s=a.value,n=l.value,i=n.find((t=>t.id===c));t.commit("changeCartCount",{shopInfo:s,productInfo:i,cartNumber:e})},m=(0,tc.iH)("all"),v=c=>{m.value=c,l.value=r.filter((t=>t.tags.includes(c)))};(0,e.bv)((()=>{d(),u(),h()}));const k=()=>{n.back()},g=(0,e.Fl)((()=>{let c=0,t=Array.from(l.value);return t.forEach((t=>{c+=p(o,t.id).cartCount})),c})),f=(0,e.Fl)((()=>{let c=0,t=Array.from(l.value);return t.forEach((t=>{t.checked&&(c+=p(o,t.id).cartCount*t.currentPrice)})),c.toFixed(2)})),y=(0,e.Fl)((()=>{const t=[],a=i.params.id;let e=Array.from(l.value);return e.forEach((c=>{c.cartCount=p(a,c.id).cartCount,c.checked=p(a,c.id).checked})),e.forEach((c=>{c.cartCount>0&&t.push(c)})),0===t.length&&(c.value=!1),t})),I=()=>{0!==y.value.length&&(c.value=!c.value)},w=c=>{const e=a.value,s=e.id;t.commit("changeItemChecked",{shopId:s,productId:c})},A=(0,e.Fl)((()=>{let c=!0;return y.value.forEach((t=>{t.checked||(c=!1)})),c})),F=()=>{const c=a.value.id,e=!A.value;t.commit("changeAllChecked",{shopId:c,checked:e})},E=()=>{const e=a.value.id;c.value=!1,t.commit("clearCart",{shopId:e})},L=()=>{const c=a.value.id;n.push({path:"/orderConfirmation/"+c})},O=c=>{"cart-mask"===c.target.className&&I()};return{item:a,handleBackClick:k,leftItems:s,currentItemName:m,handleItemClick:v,rightItems:l,changeCartCount:C,cartMaskClick:O,total:g,sumPrice:f,isShowCartList:c,cartIconClick:I,cartItems:y,changeItemChecked:w,allChecked:A,changeAllChecked:F,clearCart:E,shopId:o,gotoOrder:L}}},nc=a(89);const ic=(0,nc.Z)(lc,[["render",$],["__scopeId","data-v-525b94bd"]]);var oc=ic}}]);
//# sourceMappingURL=284.3b499450.js.map