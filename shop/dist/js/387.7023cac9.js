"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[387],{9478:function(s,o,e){e.d(o,{Z:function(){return l},z:function(){return u}});var t=e(3396),a=e(7139);const n={class:"toast"};function r(s,o,e,r,i,p){return(0,t.wg)(),(0,t.iD)("div",n,(0,a.zw)(e.message),1)}var i=e(4870),p={name:"Toast",props:{message:{type:String,default:""}}};const u=()=>{const s=(0,i.qj)({isShow:!1,toastMessage:""}),o=o=>{s.isShow=!0,s.toastMessage=o,setTimeout((()=>{s.isShow=!1,s.toastMessage=""}),1e3)},{isShow:e,toastMessage:t}=(0,i.BK)(s);return{showToast:o,isShow:e,toastMessage:t}};var c=e(89);const d=(0,c.Z)(p,[["render",r],["__scopeId","data-v-4680bc8c"]]);var l=d},8387:function(s,o,e){e.r(o),e.d(o,{default:function(){return k}});var t=e(3396),a=e(9242),n=e(1851);const r=s=>((0,t.dD)("data-v-12b06993"),s=s(),(0,t.Cn)(),s),i={class:"login"},p=r((()=>(0,t._)("div",{class:"head"},[(0,t._)("img",{src:n,alt:"",class:"head-img"})],-1))),u={class:"info"},c={class:"button-group"},d=r((()=>(0,t._)("span",{class:"gap button-group-item"},"|",-1))),l=r((()=>(0,t._)("a",{href:"#",class:"forget-password button-group-item"},"忘记密码",-1)));function g(s,o,e,n,r,g){const h=(0,t.up)("router-link"),w=(0,t.up)("Toast");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[p,(0,t._)("div",u,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>n.phone=s),type:"text",class:"input-item phone",placeholder:"请输入手机号"},null,512),[[a.nr,n.phone]]),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>n.password=s),type:"password",class:"input-item pwd",placeholder:"请输入密码"},null,512),[[a.nr,n.password]])]),(0,t._)("div",{onClick:o[2]||(o[2]=(...s)=>n.handleLogin&&n.handleLogin(...s)),class:"button"},"登录"),(0,t._)("div",c,[(0,t.Wm)(h,{to:"Register",class:"button-group-item register-now"},{default:(0,t.w5)((()=>[(0,t.Uk)("立即注册")])),_:1}),d,l])]),n.isShow?((0,t.wg)(),(0,t.j4)(w,{key:0,message:n.toastMessage},null,8,["message"])):(0,t.kq)("",!0)],64)}e(560);var h=e(2483),w=e(4870),m=e(1374),v=e(9478);const f=s=>{const o=(0,w.qj)({phone:"",password:""}),e=(0,h.tv)(),t=async()=>{try{const t=await(0,m.v_)("/user/login",{phone:o.phone,password:o.password});if(""===o.phone.trim()||""===o.password.trim())return void s("手机号或密码不能为空");0===t.errno?(localStorage.setItem("isLogin","true"),e.push({name:"Home"})):s("登录失败, 用户名或密码不正确...")}catch(t){s("发送请求失败!")}},{phone:a,password:n}=(0,w.BK)(o);return{phone:a,password:n,handleLogin:t}};var _={components:{Toast:v.Z},name:"Login",setup(){const{showToast:s,isShow:o,toastMessage:e}=(0,v.z)(),{phone:t,password:a,handleLogin:n}=f(s);return{handleLogin:n,phone:t,password:a,isShow:o,toastMessage:e}}},b=e(89);const S=(0,b.Z)(_,[["render",g],["__scopeId","data-v-12b06993"]]);var k=S},1851:function(s,o,e){s.exports=e.p+"img/head-img.50016fa4.png"}}]);
//# sourceMappingURL=387.7023cac9.js.map