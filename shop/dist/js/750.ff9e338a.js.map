{"version":3,"file":"js/750.ff9e338a.js","mappings":"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","sources":["webpack://shop/./src/components/Toast.vue","webpack://shop/./src/components/Toast.vue?44c7","webpack://shop/./src/views/register/Register.vue","webpack://shop/./src/views/register/Register.vue?6e35"],"sourcesContent":["<template>\r\n  <div class=\"toast\">{{ message }}</div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs } from \"vue\";\r\nexport default {\r\n  name: \"Toast\",\r\n  props: {\r\n    message: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n};\r\n\r\n// 封装弹框相关的代码\r\nexport const showToastEffect = () => {\r\n  // 定义响应式数据, 用来存储弹框相关的数据\r\n  const toastData = reactive({\r\n    isShow: false, // 是否显示弹框\r\n    toastMessage: \"\", // 弹框的内容\r\n  });\r\n\r\n  // 封装弹框的方法\r\n  const showToast = (message) => {\r\n    toastData.isShow = true; // 显示弹框\r\n    toastData.toastMessage = message; // 设置弹框的内容\r\n    setTimeout(() => {\r\n      toastData.isShow = false; // 隐藏弹框\r\n      toastData.toastMessage = \"\"; // 清空弹框的内容\r\n    }, 1000);\r\n  };\r\n  // 返回数据\r\n  const { isShow, toastMessage } = toRefs(toastData);\r\n  return { showToast, isShow, toastMessage };\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  padding: 3vw;\r\n  border-radius: 1vw;\r\n  color: #fff;\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=4680bc8c&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=4680bc8c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4680bc8c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login\">\r\n    <div class=\"head\">\r\n      <img src=\"../../assets/img/head-img.png\" alt=\"\" class=\"head-img\" />\r\n    </div>\r\n    <div class=\"info\">\r\n      <input\r\n        v-model=\"username\"\r\n        type=\"text\"\r\n        class=\"input-item phone\"\r\n        placeholder=\"请输入手机号\"\r\n      />\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        class=\"input-item pwd\"\r\n        placeholder=\"请输入密码\"\r\n      />\r\n      <input\r\n\t  v-model=\"confirmPassword\"\r\n        type=\"password\"\r\n        class=\"input-item confirm-pwd\"\r\n        placeholder=\"确认密码\"\r\n      />\r\n    </div>\r\n    <div @click=\"handleRegister\" class=\"button\">注册</div>\r\n    <div class=\"button-group\">\r\n      <router-link to=\"Login\" class=\"button-group-item login-now\"\r\n        >已有账号去登录</router-link\r\n      >\r\n    </div>\r\n    <Toast v-if=\"isShow\" :message=\"toastMessage\" />\r\n  </div>\r\n</template>\r\n<script>\r\n// 引入useRouter, 用于路由跳转\r\nimport { useRouter } from \"vue-router\";\r\nimport { reactive, toRefs } from \"vue\";\r\nimport { post } from \"../../utils/request\";\r\nimport Toast, { showToastEffect } from \"../../components/Toast.vue\";\r\n// 登录函数\r\nconst userRegisterEffect = (showToast) => {\r\n  const data = reactive({\r\n    phone: \"\",\r\n    password: \"\",\r\n\tconfirmPassword:\"\",\r\n  });\r\n  const router = useRouter();\r\n  // src\\views\\login\\Login.vue\r\n  const handleRegister = async () => {\r\n\t// 判断手机号和密码是否为空\r\n\tif (data.phone.trim() === \"\" || data.password.trim() === \"\") {\r\n\t\t// 提示用户\r\n\t\tshowToast(\"手机号或密码不能为空\");\r\n\t\t// 终止代码执行\r\n\t\treturn;\r\n\t}\r\n\t// 使用正则判断手机号是否合法\r\n\tconst reg = /^1[3-9]\\d{9}$/;\r\n\t// 使用正则.test(字符串), 判断字符串是否符合正则规则\r\n\tif (!reg.test(data.username)) {\r\n\t\t// 提示用户\r\n\t\tshowToast(\"手机号不合法\");\r\n\t\t// 终止代码执行\r\n\t\treturn;\r\n\t}\r\n\t// 判断密码和确认密码是否一致\r\n\tif (data.password !== data.confirmPassword) {\r\n\t\t// 提示用户\r\n\t\tshowToast(\"密码和确认密码不一致\");\r\n\t\t// 终止代码执行\r\n\t\treturn;\r\n\t}\r\n\r\n\t// 发送ajax请求, 通过手机号和密码注册新用户\r\n\ttry {\r\n\t\t// 发送请求, 获取响应数据\r\n\t\tconst res = await post(\"/user/register\", {\r\n\t\t\tusername: data.username,\r\n\t\t\tpassword: data.password,\r\n\t\t});\r\n\t\t// 判断错误码\r\n\t\tif (res.errno === 0) {\r\n\t\t\t// 注册成功\r\n\t\t\t// 设置登录状态, 把登录状态存储到localStorage中\r\n\t\t\tlocalStorage.setItem(\"isLogin\", \"true\");\r\n\t\t\t// 跳转到首页, 通过路由跳转, push的参数是一个对象, 通过name指定跳转的路由\r\n\t\t\trouter.push({ name: \"Home\" });\r\n\t\t} else {\r\n\t\t\t// 登录失败, 提示用户, res.msg是错误信息\r\n\t\t\tshowToast(res.msg);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tshowToast(error);\r\n\t}\r\n};\r\n  // 返回数据\r\n  const { phone, password } = toRefs(data);\r\n  return {\r\n    phone,\r\n    password,\r\n    handleRegister,\r\n  };\r\n};\r\nexport default {\r\n  components: { Toast },\r\n  name: \"Register\",\r\n  setup() {\r\n    const { showToast, isShow, toastMessage } = showToastEffect();\r\n    const { phone, password, handleRegister } = userRegisterEffect(showToast);\r\n    return {\r\n      handleRegister,\r\n      phone,\r\n      password,\r\n      isShow,\r\n      toastMessage,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// 引入登录注册的公共样式\r\n@import \"../../style/login-register-common.scss\";\r\n</style>\r\n","import { render } from \"./Register.vue?vue&type=template&id=08ec038c&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=08ec038c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08ec038c\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_toDisplayString","$props","message","name","props","type","String","default","showToastEffect","toastData","reactive","isShow","toastMessage","showToast","setTimeout","toRefs","__exports__","render","_createElementVNode","src","_imports_0","alt","_hoisted_2","_hoisted_3","_ctx","username","$event","placeholder","$setup","password","confirmPassword","onClick","_cache","args","handleRegister","_hoisted_4","_createVNode","_component_router_link","to","_createBlock","_component_Toast","userRegisterEffect","data","phone","router","useRouter","async","trim","reg","test","res","post","errno","localStorage","setItem","push","msg","error","components","Toast","setup"],"sourceRoot":""}