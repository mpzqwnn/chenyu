{"version":3,"file":"js/387.7023cac9.js","mappings":"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","sources":["webpack://shop/./src/components/Toast.vue","webpack://shop/./src/components/Toast.vue?44c7","webpack://shop/./src/views/login/Login.vue","webpack://shop/./src/views/login/Login.vue?9557"],"sourcesContent":["<template>\r\n  <div class=\"toast\">{{ message }}</div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs } from \"vue\";\r\nexport default {\r\n  name: \"Toast\",\r\n  props: {\r\n    message: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n};\r\n\r\n// 封装弹框相关的代码\r\nexport const showToastEffect = () => {\r\n  // 定义响应式数据, 用来存储弹框相关的数据\r\n  const toastData = reactive({\r\n    isShow: false, // 是否显示弹框\r\n    toastMessage: \"\", // 弹框的内容\r\n  });\r\n\r\n  // 封装弹框的方法\r\n  const showToast = (message) => {\r\n    toastData.isShow = true; // 显示弹框\r\n    toastData.toastMessage = message; // 设置弹框的内容\r\n    setTimeout(() => {\r\n      toastData.isShow = false; // 隐藏弹框\r\n      toastData.toastMessage = \"\"; // 清空弹框的内容\r\n    }, 1000);\r\n  };\r\n  // 返回数据\r\n  const { isShow, toastMessage } = toRefs(toastData);\r\n  return { showToast, isShow, toastMessage };\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  padding: 3vw;\r\n  border-radius: 1vw;\r\n  color: #fff;\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=4680bc8c&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=4680bc8c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4680bc8c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login\">\r\n    <div class=\"head\">\r\n      <img src=\"../../assets/img/head-img.png\" alt=\"\" class=\"head-img\" />\r\n    </div>\r\n    <div class=\"info\">\r\n      <input\r\n        v-model=\"phone\"\r\n        type=\"text\"\r\n        class=\"input-item phone\"\r\n        placeholder=\"请输入手机号\"\r\n      />\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        class=\"input-item pwd\"\r\n        placeholder=\"请输入密码\"\r\n      />\r\n    </div>\r\n    <div @click=\"handleLogin\" class=\"button\">登录</div>\r\n    <div class=\"button-group\">\r\n      <router-link to=\"Register\" class=\"button-group-item register-now\"\r\n        >立即注册</router-link\r\n      >\r\n      <span class=\"gap button-group-item\">|</span>\r\n      <a href=\"#\" class=\"forget-password button-group-item\">忘记密码</a>\r\n    </div>\r\n  </div>\r\n  <Toast v-if=\"isShow\" :message=\"toastMessage\" />\r\n</template>\r\n<script>\r\n// 引入useRouter, 用于路由跳转\r\nimport { useRouter } from \"vue-router\";\r\nimport { reactive, toRefs } from \"vue\";\r\nimport { post } from \"../../utils/request\";\r\nimport Toast, { showToastEffect } from \"../../components/Toast.vue\";\r\n// 登录函数\r\nconst userLoginEffect = (showToast) => {\r\n  const data = reactive({\r\n    phone: \"\",\r\n    password: \"\",\r\n  });\r\n  const router = useRouter();\r\n  // src\\views\\login\\Login.vue\r\n  const handleLogin = async () => {\r\n    // 调用接口\r\n    try {\r\n      const result = await post(\"/user/login\", {\r\n        phone: data.phone,\r\n        password: data.password,\r\n      });\r\n\r\n      if (data.phone.trim() === \"\" || data.password.trim() === \"\") {\r\n        // 提示用户\r\n        showToast(\"手机号或密码不能为空\");\r\n        // 终止代码执行\r\n        return;\r\n      }\r\n      if (result.errno === 0) {\r\n        localStorage.setItem(\"isLogin\", \"true\");\r\n        router.push({ name: \"Home\" });\r\n      } else {\r\n        showToast(\"登录失败, 用户名或密码不正确...\");\r\n      }\r\n    } catch (error) {\r\n      showToast(\"发送请求失败!\");\r\n    }\r\n  };\r\n  // 返回数据\r\n  const { phone, password } = toRefs(data);\r\n  return {\r\n    phone,\r\n    password,\r\n    handleLogin,\r\n  };\r\n};\r\nexport default {\r\n  components: { Toast },\r\n  name: \"Login\",\r\n  setup() {\r\n    const { showToast, isShow, toastMessage } = showToastEffect();\r\n    const { phone, password, handleLogin } = userLoginEffect(showToast);\r\n    return {\r\n      handleLogin,\r\n      phone,\r\n      password,\r\n      isShow,\r\n      toastMessage,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// 引入登录注册的公共样式\r\n@import \"../../style/_login-register-common.scss\";\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=12b06993&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=12b06993&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12b06993\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_toDisplayString","$props","message","name","props","type","String","default","showToastEffect","toastData","reactive","isShow","toastMessage","showToast","setTimeout","toRefs","__exports__","render","_createElementVNode","src","_imports_0","alt","href","_hoisted_2","_hoisted_3","$setup","phone","$event","placeholder","password","onClick","_cache","args","handleLogin","_hoisted_4","_createVNode","_component_router_link","to","_hoisted_5","_hoisted_6","_createBlock","_component_Toast","userLoginEffect","data","router","useRouter","async","result","post","trim","errno","localStorage","setItem","push","error","components","Toast","setup"],"sourceRoot":""}