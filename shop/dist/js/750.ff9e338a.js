"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[750],{9478:function(s,e,t){t.d(e,{Z:function(){return l},z:function(){return d}});var o=t(3396),a=t(7139);const n={class:"toast"};function r(s,e,t,r,i,c){return(0,o.wg)(),(0,o.iD)("div",n,(0,a.zw)(t.message),1)}var i=t(4870),c={name:"Toast",props:{message:{type:String,default:""}}};const d=()=>{const s=(0,i.qj)({isShow:!1,toastMessage:""}),e=e=>{s.isShow=!0,s.toastMessage=e,setTimeout((()=>{s.isShow=!1,s.toastMessage=""}),1e3)},{isShow:t,toastMessage:o}=(0,i.BK)(s);return{showToast:e,isShow:t,toastMessage:o}};var p=t(89);const u=(0,p.Z)(c,[["render",r],["__scopeId","data-v-4680bc8c"]]);var l=u},8750:function(s,e,t){t.r(e),t.d(e,{default:function(){return y}});var o=t(3396),a=t(9242),n=t(1851);const r=s=>((0,o.dD)("data-v-08ec038c"),s=s(),(0,o.Cn)(),s),i={class:"login"},c=r((()=>(0,o._)("div",{class:"head"},[(0,o._)("img",{src:n,alt:"",class:"head-img"})],-1))),d={class:"info"},p={class:"button-group"};function u(s,e,t,n,r,u){const l=(0,o.up)("router-link"),w=(0,o.up)("Toast");return(0,o.wg)(),(0,o.iD)("div",i,[c,(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>s.username=e),type:"text",class:"input-item phone",placeholder:"请输入手机号"},null,512),[[a.nr,s.username]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.password=s),type:"password",class:"input-item pwd",placeholder:"请输入密码"},null,512),[[a.nr,n.password]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>s.confirmPassword=e),type:"password",class:"input-item confirm-pwd",placeholder:"确认密码"},null,512),[[a.nr,s.confirmPassword]])]),(0,o._)("div",{onClick:e[3]||(e[3]=(...s)=>n.handleRegister&&n.handleRegister(...s)),class:"button"},"注册"),(0,o._)("div",p,[(0,o.Wm)(l,{to:"Login",class:"button-group-item login-now"},{default:(0,o.w5)((()=>[(0,o.Uk)("已有账号去登录")])),_:1})]),n.isShow?((0,o.wg)(),(0,o.j4)(w,{key:0,message:n.toastMessage},null,8,["message"])):(0,o.kq)("",!0)])}t(560);var l=t(2483),w=t(4870),g=t(1374),m=t(9478);const h=s=>{const e=(0,w.qj)({phone:"",password:"",confirmPassword:""}),t=(0,l.tv)(),o=async()=>{if(""===e.phone.trim()||""===e.password.trim())return void s("手机号或密码不能为空");const o=/^1[3-9]\d{9}$/;if(o.test(e.username))if(e.password===e.confirmPassword)try{const o=await(0,g.v_)("/user/register",{username:e.username,password:e.password});0===o.errno?(localStorage.setItem("isLogin","true"),t.push({name:"Home"})):s(o.msg)}catch(a){s(a)}else s("密码和确认密码不一致");else s("手机号不合法")},{phone:a,password:n}=(0,w.BK)(e);return{phone:a,password:n,handleRegister:o}};var f={components:{Toast:m.Z},name:"Register",setup(){const{showToast:s,isShow:e,toastMessage:t}=(0,m.z)(),{phone:o,password:a,handleRegister:n}=h(s);return{handleRegister:n,phone:o,password:a,isShow:e,toastMessage:t}}},v=t(89);const _=(0,v.Z)(f,[["render",u],["__scopeId","data-v-08ec038c"]]);var y=_},1851:function(s,e,t){s.exports=t.p+"img/head-img.50016fa4.png"}}]);
//# sourceMappingURL=750.ff9e338a.js.map